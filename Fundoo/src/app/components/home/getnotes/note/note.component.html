<div (mouseenter)="isFocused = true" (mouseleave)="isFocused = false">
  <mat-card [style.background-color]="note.color">
    <mat-card-title>
      <span>
        {{ note.title }}
      </span>
      <app-pin-component
        (click)="togglePin()"
        [isPined]="note.isPined"
      ></app-pin-component>
    </mat-card-title>
    <mat-card-content>
      <span>{{ note.description }}</span>
      <span *ngFor="let remainder of note.reminder">
        {{ calculateRemainder(remainder) }}
        <span
          class="remainder"
          (mouseenter)="isTimeFocused = true"
          (mouseleave)="isTimeFocused = false"
        >
          <mat-icon *ngIf="!remainderObject.isExpired">alarm</mat-icon>
          <span class="time">
            <span
              [style.text-decoration-line]="
                remainderObject.isExpired ? 'line-through' : 'none'
              "
            >
              {{
                isTimeFocused
                  ? remainderObject.remainingTime
                  : remainderObject.data
              }}
            </span>
          </span>
          <button
            mat-icon-button
            *ngIf="isTimeFocused || remainderObject.isExpired"
            (click)="removeRemainder()"
          >
            <mat-icon>close</mat-icon>
          </button>
        </span>
      </span>
    </mat-card-content>
    <mat-card-actions [style.opacity]="!isFocused ? '0' : '1'">
      <ng-container *ngIf="!note.isDeleted; else deleteBlock">
        <app-remainder-icon-component
          (dateEvent)="changeDate($event)"
        ></app-remainder-icon-component>
        <app-add-collaborator-component></app-add-collaborator-component>
        <app-paint-component
          (colorChanged)="changeColor($event)"
        ></app-paint-component>
        <app-picture-component></app-picture-component>
        <app-archieve-component
          (click)="toggleArchive()"
          [isArchived]="note.isArchived"
        >
        </app-archieve-component>
      </ng-container>
      <ng-template #deleteBlock>
        <app-trash-component
          (click)="deletePermanently()"
        ></app-trash-component>
        <app-recover-component (click)="recover()"></app-recover-component>
      </ng-template>
      <app-more-component [note]="note" [labels]="labels"></app-more-component>
    </mat-card-actions>
  </mat-card>
</div>
